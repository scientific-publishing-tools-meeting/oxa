{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/scientific-publishing-tools-meeting/schema/oxa-types.json",
  "title": "OXA Types Schema",
  "description": "JSON Schema for OXA document types",
  "definitions": {
    "Attr": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "classes": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "data": {
          "type": "object",
          "additionalProperties": true
        }
      },
      "required": ["classes", "data"]
    },
    "QuoteMark": {
      "type": "string",
      "enum": ["Single", "Double"]
    },
    "Text": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "Text"
            },
            "value": {
              "type": "string"
            }
          },
          "required": ["type", "value"]
        }
      ]
    },
    "Strong": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "Strong"
            },
            "children": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Inline"
              }
            }
          },
          "required": ["type", "children"]
        }
      ]
    },
    "Emphasis": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "Emphasis"
            },
            "children": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Inline"
              }
            }
          },
          "required": ["type", "children"]
        }
      ]
    },
    "Strikeout": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "Strikeout"
            },
            "children": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Inline"
              }
            }
          },
          "required": ["type", "children"]
        }
      ]
    },
    "Superscript": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "Superscript"
            },
            "children": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Inline"
              }
            }
          },
          "required": ["type", "children"]
        }
      ]
    },
    "Subscript": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "Subscript"
            },
            "children": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Inline"
              }
            }
          },
          "required": ["type", "children"]
        }
      ]
    },
    "SmallCaps": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "SmallCaps"
            },
            "children": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Inline"
              }
            }
          },
          "required": ["type", "children"]
        }
      ]
    },
    "Underline": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "Underline"
            },
            "children": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Inline"
              }
            }
          },
          "required": ["type", "children"]
        }
      ]
    },
    "Span": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "Span"
            },
            "children": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Inline"
              }
            }
          },
          "required": ["type", "children"]
        }
      ]
    },
    "InlineQuote": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "InlineQuote"
            },
            "children": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Inline"
              }
            },
            "mark": {
              "$ref": "#/definitions/QuoteMark"
            }
          },
          "required": ["type", "children", "mark"]
        }
      ]
    },
    "DisplayMath": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "DisplayMath"
            },
            "value": {
              "type": "string"
            }
          },
          "required": ["type", "value"]
        }
      ]
    },
    "InlineMath": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "InlineMath"
            },
            "value": {
              "type": "string"
            }
          },
          "required": ["type", "value"]
        }
      ]
    },
    "Image": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "Image"
            },
            "uri": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "children": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Inline"
              }
            }
          },
          "required": ["type", "uri", "title", "children"]
        }
      ]
    },
    "Link": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "Link"
            },
            "uri": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "children": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Inline"
              }
            }
          },
          "required": ["type", "uri", "title", "children"]
        }
      ]
    },
    "Citation": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "mode": {
              "type": "string",
              "enum": ["AuthorInText", "SupressAuthor", "NormalCitation"]
            },
            "prefix": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Inline"
              }
            },
            "suffix": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Inline"
              }
            }
          },
          "required": ["mode", "prefix", "suffix"]
        }
      ]
    },
    "Cite": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "Cite"
            },
            "citations": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Citation"
              }
            },
            "children": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Inline"
              }
            }
          },
          "required": ["type", "citations", "children"]
        }
      ]
    },
    "Inline": {
      "oneOf": [
        {
          "$ref": "#/definitions/Cite"
        },
        {
          "$ref": "#/definitions/DisplayMath"
        },
        {
          "$ref": "#/definitions/Emphasis"
        },
        {
          "$ref": "#/definitions/Image"
        },
        {
          "$ref": "#/definitions/InlineMath"
        },
        {
          "$ref": "#/definitions/Link"
        },
        {
          "$ref": "#/definitions/InlineQuote"
        },
        {
          "$ref": "#/definitions/SmallCaps"
        },
        {
          "$ref": "#/definitions/Span"
        },
        {
          "$ref": "#/definitions/Strikeout"
        },
        {
          "$ref": "#/definitions/Strong"
        },
        {
          "$ref": "#/definitions/Subscript"
        },
        {
          "$ref": "#/definitions/Superscript"
        },
        {
          "$ref": "#/definitions/Text"
        },
        {
          "$ref": "#/definitions/Underline"
        }
      ]
    },
    "Paragraph": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "Paragraph"
            },
            "children": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Inline"
              }
            }
          },
          "required": ["type", "children"]
        }
      ]
    },
    "Plain": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "Plain"
            },
            "children": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Inline"
              }
            }
          },
          "required": ["type", "children"]
        }
      ]
    },
    "Div": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "Div"
            },
            "children": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Block"
              }
            }
          },
          "required": ["type", "children"]
        }
      ]
    },
    "BlockQuote": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "BlockQuote"
            },
            "children": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Block"
              }
            }
          },
          "required": ["type", "children"]
        }
      ]
    },
    "Heading": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "Heading"
            },
            "children": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Inline"
              }
            },
            "level": {
              "type": "integer",
              "minimum": 1
            }
          },
          "required": ["type", "children", "level"]
        }
      ]
    },
    "CodeBlock": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "CodeBlock"
            },
            "value": {
              "type": "string"
            }
          },
          "required": ["type", "value"]
        }
      ]
    },
    "Section": {
      "allOf": [
        {
          "$ref": "#/definitions/Attr"
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "Section"
            },
            "children": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Block"
              }
            }
          },
          "required": ["type", "children"]
        }
      ]
    },
    "Block": {
      "oneOf": [
        {
          "$ref": "#/definitions/Section"
        },
        {
          "$ref": "#/definitions/BlockQuote"
        },
        {
          "$ref": "#/definitions/CodeBlock"
        },
        {
          "$ref": "#/definitions/Div"
        },
        {
          "$ref": "#/definitions/Heading"
        },
        {
          "$ref": "#/definitions/Paragraph"
        },
        {
          "$ref": "#/definitions/Plain"
        }
      ]
    },
    "Document": {
      "type": "object",
      "properties": {
        "metadata": {
          "type": "object",
          "additionalProperties": true
        },
        "title": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Inline"
          }
        },
        "children": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Block"
          }
        }
      },
      "required": ["metadata", "title", "children"]
    }
  },
  "$ref": "#/definitions/Document"
}
